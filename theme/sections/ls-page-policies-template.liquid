<div class="container container--flush container--medium">
  <div class="faq">
    <div class="faq__group-list">
      {%- for block in section.blocks -%}
        {%- if forloop.first or block.type == 'separator' -%}
          <div class="faq__group">
        {%- endif -%}

        {%- case block.type -%}
          {%- when 'separator' -%}
            <h1 class="faq__group-title heading h2" {{ block.shopify_attributes }}>
              <span class="anchor" id="block-{{ block.id }}"></span>
              {{- block.settings.label | escape -}}
            </h1>
          {%- when 'policy' -%}
            <div class="faq__item" {{ block.shopify_attributes }}>
              <div class="faq__item-wrapper">
                <button class="faq__question heading h4" data-action="toggle-collapsible" aria-expanded="false" aria-controls="block-{{ block.id }}">{{ block.settings.label | escape }} <span class="plus-button plus-button--large"></span></button>

                <div id="block-{{ block.id }}" class="faq__answer-wrapper">
                  <div class="faq__answer rte">
                    {%- assign policy_name = block.settings.url | remove: '/policies/' | replace: '-', '_' -%}
                    {{ shop[policy_name].body }}
                  </div>
                </div>
              </div>
            </div>
        {%- endcase -%}

        {%- if forloop.last or block.type == 'policy' and section.blocks[forloop.index].type == 'separator' -%}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>

    {%- if section.settings.show_contact_info -%}
      <div class="container--unflush">
        <div class="faq__contact-info">
          <header class="page__header page__header--stack page__header--centered">
            {%- if section.settings.contact_info_heading != blank -%}
              <h2 class="page__title heading h2">{{ section.settings.contact_info_heading | escape }}</h2>
            {%- endif -%}

            {%- if section.settings.contact_info_text != blank -%}
              <div class="page__description rte">
                {{ section.settings.contact_info_text }}
              </div>
            {%- endif -%}
          </header>

          <div class="text-with-icons text-with-icons--boxed">
            {%- if section.settings.contact_1_heading != blank or section.settings.contact_1_text != blank -%}
              <div class="text-with-icons__item">
                <div class="text-with-icons__icon-wrapper">
                  {%- render 'icon', icon: section.settings.contact_1_icon, stroke_width: 1.5 -%}
                </div>

                <div class="text-with-icons__content-wrapper">
                  {%- if section.settings.contact_1_heading != blank -%}
                    {%- capture heading -%}
                      {%- if section.settings.contact_1_url != blank -%}
                        <a href="{{ section.settings.contact_1_url }}">{{ section.settings.contact_1_heading | escape }}</a>
                      {%- else -%}
                        {{ section.settings.contact_1_heading | escape }}
                      {%- endif -%}
                    {%- endcapture-%}
                    <p class="text-with-icons__title text--strong">{{ heading }}</p>
                  {%- endif -%}

                  {%- if section.settings.contact_1_text != blank -%}
                    <div class="text-with-icons__content rte">
                      {{ section.settings.contact_1_text }}
                    </div>
                  {%- endif -%}
                </div>
              </div>
            {%- endif -%}

            {%- if section.settings.contact_2_heading != blank or section.settings.contact_2_text != blank -%}
              <div class="text-with-icons__item">
                <div class="text-with-icons__icon-wrapper">
                  {%- render 'icon', icon: section.settings.contact_2_icon, stroke_width: 1.5 -%}
                </div>

                <div class="text-with-icons__content-wrapper">
                  {%- if section.settings.contact_2_heading != blank -%}
                    {%- capture heading -%}
                      {%- if section.settings.contact_2_url != blank -%}
                        <a href="{{ section.settings.contact_2_url }}">{{ section.settings.contact_2_heading | escape }}</a>
                      {%- else -%}
                        {{ section.settings.contact_2_heading | escape }}
                      {%- endif -%}
                    {%- endcapture-%}
                    <p class="text-with-icons__title text--strong">{{ heading }}</p>
                  {%- endif -%}

                  {%- if section.settings.contact_2_text != blank -%}
                    <div class="text-with-icons__content rte">
                      {{ section.settings.contact_2_text }}
                    </div>
                  {%- endif -%}
                </div>
              </div>
            {%- endif -%}
          </div>
        </div>
      </div>
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "Policies",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_contact_info",
      "label": "Show additional info",
      "info": "Additional info is displayed below all questions.",
      "default": true
    },
    {
      "type": "text",
      "id": "contact_info_heading",
      "label": "Heading",
      "default": "Have Questions?"
    },
    {
      "type": "richtext",
      "id": "contact_info_text",
      "label": "Text",
      "default": "<p>If you have questions about our policies, please contact us!</p>"
    },
    {
      "type": "header",
      "content": "Contact One"
    },
    {
      "type": "select",
      "id": "contact_1_icon",
      "label": "Icon",
      "options": [
        {
          "value": "bi-add-to-cart",
          "label": "Add to cart",
          "group": "Shop"
        },
        {
          "value": "bi-gift-wrap",
          "label": "Gift wrap",
          "group": "Shop"
        },
        {
          "value": "bi-gift-box",
          "label": "Gift box",
          "group": "Shop"
        },
        {
          "value": "bi-heart",
          "label": "Heart",
          "group": "Shop"
        },
        {
          "value": "bi-ecology",
          "label": "Ecology",
          "group": "Shop"
        },
        {
          "value": "bi-plant",
          "label": "Plant",
          "group": "Shop"
        },
        {
          "value": "bi-shop",
          "label": "Shop",
          "group": "Shop"
        },
        {
          "value": "bi-shop-pin",
          "label": "Shop with pin",
          "group": "Shop"
        },
        {
          "value": "bi-alert",
          "label": "Alert",
          "group": "Communication"
        },
        {
          "value": "bi-chat",
          "label": "Chat",
          "group": "Communication"
        },
        {
          "value": "bi-comment",
          "label": "Comment",
          "group": "Communication"
        },
        {
          "value": "bi-customer-support",
          "label": "Customer support",
          "group": "Communication"
        },
        {
          "value": "bi-email",
          "label": "Email",
          "group": "Communication"
        },
        {
          "value": "bi-network",
          "label": "Network",
          "group": "Communication"
        },
        {
          "value": "bi-newsletter",
          "label": "Newsletter",
          "group": "Communication"
        },
        {
          "value": "bi-love",
          "label": "Love",
          "group": "Communication"
        },
        {
          "value": "bi-phone",
          "label": "Phone",
          "group": "Communication"
        },
        {
          "value": "bi-share",
          "label": "Share",
          "group": "Communication"
        },
        {
          "value": "bi-delivery",
          "label": "Delivery",
          "group": "Delivery"
        },
        {
          "value": "bi-fast-delivery",
          "label": "Fast delivery",
          "group": "Delivery"
        },
        {
          "value": "bi-returns",
          "label": "Returns",
          "group": "Delivery"
        },
        {
          "value": "bi-time",
          "label": "Time",
          "group": "Delivery"
        },
        {
          "value": "bi-secure-payment",
          "label": "Secure payment",
          "group": "Security"
        },
        {
          "value": "bi-mobile-payment",
          "label": "Mobile payment",
          "group": "Security"
        },
        {
          "value": "bi-credit-card",
          "label": "Credit card",
          "group": "Security"
        },
        {
          "value": "bi-shield",
          "label": "Shield",
          "group": "Security"
        }
      ],
      "default": "bi-phone"
    },
    {
      "type": "text",
      "id": "contact_1_heading",
      "label": "Heading",
      "default": "Customer support"
    },
    {
      "type": "url",
      "id": "contact_1_url",
      "label": "Link"
    },
    {
      "type": "richtext",
      "id": "contact_1_text",
      "label": "Text",
      "default": "<p>Enter your text here</p>"
    },
    {
      "type": "header",
      "content": "Contact Two"
    },
    {
      "type": "select",
      "id": "contact_2_icon",
      "label": "Icon",
      "options": [
        {
          "value": "bi-add-to-cart",
          "label": "Add to cart",
          "group": "Shop"
        },
        {
          "value": "bi-gift-wrap",
          "label": "Gift wrap",
          "group": "Shop"
        },
        {
          "value": "bi-gift-box",
          "label": "Gift box",
          "group": "Shop"
        },
        {
          "value": "bi-heart",
          "label": "Heart",
          "group": "Shop"
        },
        {
          "value": "bi-ecology",
          "label": "Ecology",
          "group": "Shop"
        },
        {
          "value": "bi-plant",
          "label": "Plant",
          "group": "Shop"
        },
        {
          "value": "bi-shop",
          "label": "Shop",
          "group": "Shop"
        },
        {
          "value": "bi-shop-pin",
          "label": "Shop with pin",
          "group": "Shop"
        },
        {
          "value": "bi-alert",
          "label": "Alert",
          "group": "Communication"
        },
        {
          "value": "bi-chat",
          "label": "Chat",
          "group": "Communication"
        },
        {
          "value": "bi-comment",
          "label": "Comment",
          "group": "Communication"
        },
        {
          "value": "bi-customer-support",
          "label": "Customer support",
          "group": "Communication"
        },
        {
          "value": "bi-email",
          "label": "Email",
          "group": "Communication"
        },
        {
          "value": "bi-network",
          "label": "Network",
          "group": "Communication"
        },
        {
          "value": "bi-newsletter",
          "label": "Newsletter",
          "group": "Communication"
        },
        {
          "value": "bi-love",
          "label": "Love",
          "group": "Communication"
        },
        {
          "value": "bi-phone",
          "label": "Phone",
          "group": "Communication"
        },
        {
          "value": "bi-share",
          "label": "Share",
          "group": "Communication"
        },
        {
          "value": "bi-delivery",
          "label": "Delivery",
          "group": "Delivery"
        },
        {
          "value": "bi-fast-delivery",
          "label": "Fast delivery",
          "group": "Delivery"
        },
        {
          "value": "bi-returns",
          "label": "Returns",
          "group": "Delivery"
        },
        {
          "value": "bi-time",
          "label": "Time",
          "group": "Delivery"
        },
        {
          "value": "bi-secure-payment",
          "label": "Secure payment",
          "group": "Security"
        },
        {
          "value": "bi-mobile-payment",
          "label": "Mobile payment",
          "group": "Security"
        },
        {
          "value": "bi-credit-card",
          "label": "Credit card",
          "group": "Security"
        },
        {
          "value": "bi-shield",
          "label": "Shield",
          "group": "Security"
        }
      ],
      "default": "bi-email"
    },
    {
      "type": "text",
      "id": "contact_2_heading",
      "label": "Heading",
      "default": "Send a message"
    },
    {
      "type": "url",
      "id": "contact_2_url",
      "label": "Link"
    },
    {
      "type": "richtext",
      "id": "contact_2_text",
      "label": "Text",
      "default": "<p>Enter your text here</p>"
    }
  ],
  "blocks": [
    {
      "type": "policy",
      "name": "Policy",
      "settings": [
        {
          "type": "url",
          "id": "url",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "label",
          "label": "Label"
        }
      ]
    },
    {
      "type": "separator",
      "name": "Section separator",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "My Custom Heading"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "policy",
        "settings": {
          "label": "Shipping Policy",
          "url": ""
        }
      },
      {
        "type": "policy",
        "settings": {
          "label": "Return Policy",
          "url": ""
        }
      },
      {
        "type": "policy",
        "settings": {
          "label": "Privacy Policy",
          "url": ""
        }
      },
      {
        "type": "policy",
        "settings": {
          "label": "Terms of Service",
          "url": ""
        }
      }
    ]
  }
}
{% endschema %}
